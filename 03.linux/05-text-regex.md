# 05 | æ–‡æœ¬å¤„ç†ä¸æ­£åˆ™æŠ€å·§

æœ¬æ¨¡å—æ•´ç†äº† Linux ç³»ç»Ÿä¸­ç”¨äºæ–‡æœ¬æå–ã€è¿‡æ»¤ã€è½¬æ¢çš„æ ¸å¿ƒå‘½ä»¤ï¼ŒåŒ…å« `grep`ã€`sed`ã€`awk`ã€`cut`ã€`sort`ã€`uniq` ç­‰ï¼Œé€‚ç”¨äºæ—¥å¿—æ’æŸ¥ã€é…ç½®æ–‡ä»¶ä¿®æ”¹ã€æ•°æ®ç®¡é“è„šæœ¬ç­‰åœºæ™¯ã€‚

> ğŸ“Œ æ³¨ï¼šå¤§é‡å‘½ä»¤ä¸ºå†å²è„šæœ¬ç‰‡æ®µæˆ–æ’æŸ¥æ—¥å¿—æ—¶æ€»ç»“ï¼Œè¯·åŠ¡å¿…ä¿ç•™æ³¨é‡Šï¼

---

## ğŸ” grepï¼šæ–‡æœ¬æœç´¢

```bash
grep "ERROR" app.log                         # æŸ¥æ‰¾åŒ…å« ERROR çš„è¡Œ
grep -rn "token" ./src                       # é€’å½’æŸ¥æ‰¾ç›®å½•ä¸­çš„åŒ¹é…é¡¹
grep -v "^#" /etc/nginx/nginx.conf           # æ’é™¤æ³¨é‡Šè¡Œ
```

---

## âœ‚ï¸ cutï¼šæŒ‰åˆ—åˆ‡å‰²

```bash
cat /etc/passwd | cut -d ':' -f1             # è·å–æ‰€æœ‰ç”¨æˆ·å
df -h | grep "/dev" | cut -d ' ' -f1         # ä»…æå–è®¾å¤‡åç§°ï¼ˆâš ï¸ ç©ºæ ¼åˆ†éš”éœ€æ³¨æ„å¤šç©ºæ ¼ï¼‰
```

---

## ğŸ”„ sort / uniqï¼šå»é‡ + æ’åºç»„åˆæ‹³

```bash
sort users.txt | uniq                        # å¯¹ç”¨æˆ·åˆ—è¡¨å»é‡
cat access.log | cut -d ' ' -f1 | sort | uniq -c | sort -nr
# ç»Ÿè®¡ IP è®¿é—®é¢‘æ¬¡å¹¶å€’åºè¾“å‡º
```

---

## ğŸ§™ sedï¼šè¡Œå†…æ›¿æ¢ & å¤šè¡ŒåŒ¹é…

```bash
sed 's/localhost/127.0.0.1/g' nginx.conf     # å°† localhost å…¨éƒ¨æ›¿æ¢ä¸º IP
sed -n '5,10p' app.log                       # æ‰“å°ç¬¬ 5~10 è¡Œ
sed '/^$/d' file.txt                         # åˆ é™¤ç©ºè¡Œ
```

---

## ğŸ§  awkï¼šå­—æ®µçº§æå–ç¥å™¨

```bash
awk '{print $1, $3}' /etc/passwd             # è¾“å‡ºç¬¬ 1 å’Œç¬¬ 3 åˆ—
df -h | awk 'NR>1 {print $1, $5}'            # è·³è¿‡è¡¨å¤´ï¼Œè¾“å‡ºæŒ‚è½½ç‚¹å’Œç£ç›˜ä½¿ç”¨ç‡
awk -F ':' '{print $1}' /etc/passwd          # ä½¿ç”¨å†’å·ä½œä¸ºåˆ†éš”ç¬¦ï¼Œè¾“å‡ºç”¨æˆ·å
```

---

## ğŸ§ª ç»¼åˆä½¿ç”¨ç¤ºä¾‹

```bash
cat nginx.log | grep "404" | awk '{print $1}' | sort | uniq -c | sort -nr | head
# ç»Ÿè®¡è§¦å‘ 404 çš„æ¥æº IP æ’åå‰å‡ å
```

---

## ğŸ§  å†å²æ³¨é‡Šè¯´æ˜

- `grep -rn` æ˜¯ä½ æ’æŸ¥å‰ç«¯é¡¹ç›® token å­—æ ·æ³„éœ²çš„åˆ©å™¨
- `awk` æ˜¯åˆ†æ nginx æ—¥å¿—æ—¶æœ€å¸¸ç”¨çš„æå–æ–¹å¼ï¼ˆå°¤å…¶æ˜¯ `$7`ï¼šè¯·æ±‚è·¯å¾„ï¼‰
- `sed '/^$/d'` æ›¾ç”¨äºæ¸…ç†è‡ªåŠ¨ç”Ÿæˆè„šæœ¬ä¸­çš„æ¨¡æ¿ç©ºè¡Œ
- `uniq -c | sort -nr` æ˜¯æ’æŸ¥æ”»å‡»æ¥æºï¼ˆDDOSã€IPï¼‰ç”¨çš„ç»Ÿè®¡æ³•å®

---

> ğŸ“ ä¸‹ä¸€æ¨¡å—ï¼šShell è„šæœ¬ç‰‡æ®µ â†’ [06-shell-snippets.md](./06-shell-snippets.md)
